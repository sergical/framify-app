import { ImageResponse } from "next/og";

export const runtime = "edge";

export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const followerCount = searchParams.get("followerCount");
  const username = searchParams.get("username");

  return new ImageResponse(
    (
      <div
        style={{
          display: "flex",
          fontSize: 30,
          color: "white",
          background: "#855DCD",
          width: "100%",
          height: "100%",
          paddingTop: 20,
          flexDirection: "column",
          justifyContent: "center",
          alignItems: "center",
        }}
      >
        <svg fill="none" height="200" viewBox="0 0 1000 1000" width="200">
          <clipPath id="a">
            <path d="m0 0h1000v1000h-1000z" />
          </clipPath>
          <g clip-path="url(#a)">
            <path
              d="m800 0h-600c-110.4569 0-200 89.5431-200 200v600c0 110.457 89.5431 200 200 200h600c110.457 0 200-89.543 200-200v-600c0-110.4569-89.543-200-200-200z"
              fill="#fafafa"
            />
            <g fill="#855dcd">
              <path d="m626.198 170.194s-8.821 2.514-23.312 6.914c-2.521-8.172-6.301-17.601-11.341-27.659-16.382-31.431-40.955-48.404-69.938-48.404-1.89 0-3.78 0-6.3.628-.631-1.257-1.891-1.8855-2.521-3.1428-12.601-13.8298-28.983-20.116-48.515-19.4874-37.804 1.2573-75.608 28.2882-105.851 76.6922-21.422 33.946-37.804 76.693-42.214 110.01-43.475 13.201-73.718 22.63-74.348 23.259-22.052 6.915-22.683 7.543-25.203 28.288-3.78 15.716-61.116 458.897-61.116 458.897l476.33 82.35v-689.603c-2.52.629-4.411.629-5.671 1.258zm-110.261 33.945c-25.203 7.544-52.926 16.345-80.019 24.517 7.561-29.546 22.683-59.091 40.324-78.578 6.931-6.915 16.382-15.087 27.093-20.116 10.711 22.63 13.232 53.433 12.602 74.177zm-51.036-99.951c8.821 0 16.382 1.886 22.683 5.657-10.081 5.029-20.162 13.202-29.613 22.631-23.943 25.774-42.215 66.006-49.776 104.352-22.682 6.915-45.364 13.83-66.157 20.116 13.232-59.72 64.267-150.87 122.863-152.756zm-73.717 345.744c2.52 40.232 109.001 49.033 115.302 143.955 4.41 74.807-39.695 125.726-103.331 129.497-76.868 5.029-119.083-40.232-119.083-40.232l16.382-69.149s42.214 32.06 76.238 29.546c22.052-1.257 30.243-19.488 29.613-32.06-3.15-52.805-90.099-49.661-95.77-136.412-5.04-72.292 42.845-145.841 148.696-152.756 40.954-2.514 61.746 7.544 61.746 7.544l-23.942 90.522s-27.093-12.573-59.227-10.058c-46.624 3.143-47.255 32.688-46.624 39.603zm149.955-253.336c0-18.859-2.52-45.89-11.341-68.52 28.983 5.657 42.845 37.717 49.145 57.205-11.341 3.143-23.942 6.914-37.804 11.315z" />
              <path d="m553.5 280.5-267 41-55 378 78 56 236-17z" />
              <path d="m647.62 856.024 197.841-49.032s-85.059-573.936-85.689-577.708c-.63-3.771-3.78-6.286-6.931-6.286-3.15 0-58.596-1.257-58.596-1.257s-34.023-32.689-46.625-45.261z" />
            </g>
            <path
              d="m307.28 388.78c64.467-10.893 127.733-21.153 189.8-30.78-2.753 117.547-5.307 232.523-7.66 344.93-10.2-1.24-20.393-2.483-30.58-3.73 1.887-49.867 3.53-100.33 4.93-151.39-.093-.007-.187-.01-.28-.01-2.04-43.08-30.22-75.45-65.85-73.06-35.81 2.71-67.4 34.62-73.15 71.89-.1.007-.197.01-.29.01-2.987 44.287-5.987 88.897-9 133.83-9.727-1.347-19.45-2.693-29.17-4.04 6.647-94.08 13.73-189.963 21.25-287.65z"
              fill="#fff"
            />
            <path
              d="m252.1 437.58c2.7 13.027 5.403 26.077 8.11 39.15 3.313-.267 6.63-.54 9.95-.82-4.447 53.473-8.567 105.887-12.36 157.24-5.03-.31-9.38 3.3-9.73 8.05-.253 3.44-.507 6.89-.76 10.35-.607-.053-1.217-.103-1.83-.15-5.02-.39-9.38 3.14-9.73 7.85-.247 3.433-.497 6.887-.75 10.36 34.02 4.547 68.047 9.18 102.08 13.9.253-3.927.51-7.847.77-11.76.36-5.4-3.44-10.26-8.47-10.88-.613-.073-1.227-.15-1.84-.23.26-3.847.52-7.69.78-11.53.35-5.29-3.45-9.99-8.49-10.5-3.653-.36-7.307-.72-10.96-1.08 4.733-68.593 9.683-138.137 14.85-208.63-23.82 3.133-47.693 6.027-71.62 8.68z"
              fill="#fff"
            />
            <path
              d="m462.59 653.26c-5.18-.52-9.58 3.76-9.81 9.56-.173 4.187-.35 8.373-.53 12.56-.633-.073-1.267-.147-1.9-.22-5.23-.59-9.7 3.58-9.99 9.31-.207 4.14-.413 8.277-.62 12.41 35.66 4.347 71.297 8.66 106.91 12.94.04-4.373.07-8.757.09-13.15.02-6.09-4.14-11.41-9.31-11.9-.627-.067-1.253-.13-1.88-.19.033-4.387.063-8.773.09-13.16.03-6.08-4.11-11.37-9.26-11.84.373-65.68.863-133.2 1.47-202.56 3.247-.04 6.49-.07 9.73-.09 3.98-17.767 7.95-35.603 11.91-53.51-23.287 1.507-46.477 3.413-69.57 5.72-2.113 83.127-4.127 164.883-6.04 245.27-3.76-.38-7.523-.763-11.29-1.15z"
              fill="#fff"
            />
          </g>
        </svg>
        <p>Thanks for your purchase @{username}</p>
        <p>Wait for an email to complete your shipping details</p>
        <p>
          Meanwhile, share with your{" "}
          {parseInt(followerCount || "").toLocaleString()} frens on Warpcast!
        </p>
        <p>Don&apos;t forget to post it to the /framify channel.</p>
      </div>
    ),
    {
      width: 1200,
      height: 630,
    }
  );
}
